<!DOCTYPE html>
<html>
<head>
	<title>GazerTest (WebGazer powered)</title>

	<script src="./js/WebGazer.js" type="text/javascript" ></script>
	<script src="./js/precision_store_points.js" type="text/javascript" ></script>
	<script src="./js/require.js" type="text/javascript" ></script>
	
	<script type="text/javascript">
		window.onload = function() {
    		webgazer.setRegression('threadedRidge') /* currently must set regression and tracker */
        		.setTracker('clmtrackr')
        		.begin()
        		.showPredictionPoints(true);
        };
    </script>
</head>
<body>

	<button onclick="saveGazerData()">save</button>

	<script type="text/javascript">

		function saveGazerData(){

			//save fixaxion data
			flag = 1;

			var csvStuff=[[]];
			var dummy=[0,0];
			for (var i = Xfixations.length - 1; i >= 0; i--) {
				dummy=[Xfixations[i],Yfixations[i]];
				csvStuff.push(dummy);
			}

			console.log(csvStuff)

			var csv = 'x fixations,y fixations';
    		csvStuff.forEach(function(row) {
            	csv += row.join(',');
            	csv += "\n";
    		});

			var hiddenElement = document.createElement('a');
			hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
			hiddenElement.target = '_blank';
			hiddenElement.download = 'myFile.csv';
			hiddenElement.click();

		}
			

	</script>
</body>
</html>